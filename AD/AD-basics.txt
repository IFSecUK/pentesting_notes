What is Active Directory?
	-> Directory Service developed by Microsoft to manage Windows domain networks. 
	-> Stores information related to objects, such as computers, Users, PRinters, etc.
		-> Think about it as a phone book for Windows. 
	-> Authenticates using Kerberos tickets.
		-> Non-Windows devices, such as Linux machines, firewalls, etc. can also authenticate to Active Directory via RADIUS or LDAP. 

Why Active Directory?
	-> Active Directory is the most commonly used Identity management service in the world.	
		-> 95% of Fortune 1000 companies implement the service in their networks.
	-> Can be exploited eithout ever attacking patchable exploits.
		-> Instead, we abuse features, trusts, components, and more.


Physical AD components:
	1. Domain Controllers
		-> A DC is a server with the AD DS server role installed that has specifically been promoted to a DC.
		-> Host a copy of the AD DS directory store.
		-> Provide authentication and authorization services.
		-> Replicate updates to other domain controllers in the domain and forest.
		-> Allow administrative access to manage user acounts and network resources.
	2. AD DS Data Store:
		-> The AD DS data store contains the database files and processes that store and manage directory information for users, services and applications.
		-> Consists of the Ntds.dit file
		-> Is stored by default in the %SystemRoot%\NTDS folder on all domain controllers.
		-> Is accessible only through the domain controller processes and protocols.

Logical AD Components:
	1. AD DS Schema:
		-> Defines every type of object that can be stored in the directory.
		-> Enforces rules regarding	object creation and configuration.
		-> It is just like a rule book. You can even say a blueprint.
	2. Domains (Contoso.com):
		-> Domains are used to group and manage objects in an organization.
		-> An administrative boundary for applying policies to groups of objects.
		-> A replication boundary for replicating data between domain controllers.
		-> An authentication and authorization boundary that provides a way to limit the scope of access to resources.
	3. Trees (contoso.com -> emea.contoso.com, na.contoso.com):
		-> A domain tree is a hierarchy of domains in AD DS.
		-> Share a contiguous namespace with a parent domain.
		-> Can have additional child domains.
		-> By default create a two-way transitive trust with other domains.
	4. Forests
		-> A forest is a collection of one or more domain trees.
		-> Share a common scheme
		-> Share a common configuration partition.
		-> Share a common global catalog to enable searching.
		-> Enable trusts between all domains in the forest.
		-> Share the Enterprise Admins and Schema Admins groups.
	5. Organizational Units (Ous):
		-> OUs are Active Directory containers that can contain users, groups, computers and other OUs.
		-> Represent your organization heirarchically and logically.
		-> Manage a collection of objects in a consistent way.
		-> Delegate permissions to administer groups of objects.
		-> Apply policies.
	6. Trusts:
		-> Trusts provide a mechanism for users to gain access to resources in another domain.
		-> Directional: The trust direction flows from trusting domain to the trusted domain.
		-> Transitive: The trust relationship is extended beyond a two-domain trust to include other trusted domains. 
		-> All domains in a forest trust all other domains in the forest.
		-> Trusts can extend outside the forest.
	7. Objects:
		-> User: Enables network resource access for a user.
		-> InetOrgPerson: -> Similar to a user account.
						  -> Used for compatibility with other directory services.
		-> Contacts: -> Used primarily to assign email-addresses to external users.
					 -> Does not enable network access.
		-> Groups: Used to simplify the administration of access control.
		-> Computers: Enables authentication and auditing of computer access to resources.
		-> PRinters: Used to simplify the process of locating and connecting to printers.
		-> Shared Folders: Enables users to search for shared folders based on properties.
		


Note: Service accounts should never be domain admins.

creating a service
>setspn -a HYDRA-DC/SQLService.MARVEL.local:60111 MARVEL\SQLService

setting a service:
>setspn -T MARVEL.local -Q */*